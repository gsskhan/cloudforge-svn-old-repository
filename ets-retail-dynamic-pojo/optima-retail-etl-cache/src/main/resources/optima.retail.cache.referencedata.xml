<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<beans	xmlns="http://www.springframework.org/schema/beans"
		xmlns:c="http://www.springframework.org/schema/c"
		xmlns:p="http://www.springframework.org/schema/p"		
		xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		xmlns:util="http://www.springframework.org/schema/util"
		xmlns:context="http://www.springframework.org/schema/context"
		xsi:schemaLocation="
				http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
				http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd
				http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd">
		    
    <bean id="cacheProperties"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>classpath:optima.retail.cache.sql.queries.properties</value>
                <value>classpath:optima.retail.cache.filescanner.rulenames.properties</value>
            </list>
        </property>
    </bean>
    
    <bean	id="referenceDataEhCacheManager"
    		class="org.springframework.cache.ehcache.EhCacheCacheManager"
        	p:cacheManager-ref="referenceDataCacheManager"
	/>

    <bean	id="referenceDataCacheManager"
    		class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean"
    		p:cacheManagerName="referenceDataCache"
    		p:configLocation="classpath:ehcache/ehcache.referencedata.xml"
    />

    <bean   id="referenceBandCacheEntryHelper"
            class="com.citi.retail.optima.etl.cache.helper.ReferenceBandEntryHelper"/>
    
<!-- ************************************** End of PDRange Caches**************************************-->

   <!--  <bean	id="referenceValueCacheEntryHelper"
    		class="com.citi.retail.optima.etl.cache.helper.ReferenceValueEntryHelper"
    />
    
    <bean	id="referenceValueLookup"
			class="com.citi.retail.optima.etl.cache.lookup.ReferenceValueLookup"
			c:_0-ref="referenceDataEhCacheManager"
	/> -->
    
<!-- ************************************** Starting Country Region Caches**************************************-->

 	<bean	id="referenceValueLookup"
			class="com.citi.retail.optima.etl.cache.lookup.ReferenceValueLookup"
			c:_0-ref="referenceDataEhCacheManager"
			depends-on="countryRegionCacheLoader"
	/>
    
    <bean	id="countryRegionCacheService"
    		factory-bean="referenceDataEhCacheManager"
    		factory-method="getCache"
    		c:_0="countryRegionCache"
    />
    
    <bean	id="countryRegionCacheLoader"
    		class="com.citi.retail.optima.etl.cache.ehcache.SingleValueCacheDataLoaderImpl"
    		p:cache-ref="countryRegionCacheService"
    		p:cacheEntryHelper-ref="countryRegionCacheEntryHelper"
    		p:dao-ref="countryRegionDaoImpl"
    		p:preloadCache="true"
    />

	<bean id="countryRegionDaoImpl" class="com.citi.retail.optima.etl.cache.dao.impl.SingleValueCacheLoaderDaoImpl"
        p:jdbcTemplate-ref="jdbcTemplate"
        p:sql="${query.cache.referencedata.countryRegion}" 
    />
    
	<bean	id="countryRegionCacheEntryHelper"
			class="com.citi.retail.optima.etl.cache.helper.SingleValueCacheEntryHelper"
	/>
 <!-- ************************************** End of Country Region Caches**************************************-->
</beans>							