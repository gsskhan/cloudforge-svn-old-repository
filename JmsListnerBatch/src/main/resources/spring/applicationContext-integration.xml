<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:int="http://www.springframework.org/schema/integration"
	xmlns:int-jms="http://www.springframework.org/schema/integration/jms"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
		http://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration-3.0.xsd
		http://www.springframework.org/schema/integration/jms http://www.springframework.org/schema/integration/jms/spring-integration-jms-3.0.xsd">


<bean id="messageListenerContainer" class="org.springframework.jms.listener.DefaultMessageListenerContainer">
	<property name="connectionFactory" ref="cachingConnectionFactory" />
	<property name="destination" ref="destination" />
    <property name="maxConcurrentConsumers" value="1"/>
    <property name="concurrentConsumers" value="1"/>
    <property name="receiveTimeout" value="5000"/>
    <property name="recoveryInterval" value="60000"/>
    <property name="autoStartup" value="true"/>
    <property name="transactionManager" ref="jmsTransManager" />
</bean>

<int:channel id="inbound" />
<int-jms:message-driven-channel-adapter  id="jmsIn" channel="inbound" container="messageListenerContainer" acknowledge="transacted" extract-payload="false"/>

<bean  id="consumerService" class="com.citi.ets.jms.listner.ConsumerProcess" />
<int:service-activator input-channel="inbound" ref="consumerService" method="processMessage" />

</beans>
